# How to set up a data processing + analysis workflow with Fragpipe and Fragpipe Analyzer

## How to use Fragpipe to process DIA data 

Step 0: 
Start by locating the Fragpipe shortcut on your desktop. It should look like this: 
![Step 0](./screenshots/Step_0.png)

Step 1:
Then left click it to run as administrator. This won't work otherwise. 
![Step 1](./screenshots/Step_1.png)

Step 1 Alternative:
If you can't find the shortcut on your desktop, press the Windows key to search for Fragpipe and click on "run as administrator". 
![Step 1 Alt](./screenshots/Step_1_Alt.png)

Step 2:
The program should open and greet you with this screen. You should be on the Config tab. It should look something like this: 
![Step 2](./screenshots/Step_2.png)

Step 3:
Pay attention to this top part of the menu. You might need to download some additional software tools for this workflow, so click download. 
![Step 3](./screenshots/Step_3.png)

Step 4:
A separate menu will pop up, asking for your credentials. Simply enter the information as requested and agree to the terms and conditions. Then click Send Verification Email to receive a code (check your spam) and enter it in the box. When you are done, click download.
![Step 4](./screenshots/Step_4.png)

Step 5:
Then navigate to the next section on the menu. Fragpipe might already be bundled with DIA-NN, but if you don't see DIA-NN installed, click download. 
![Step 5](./screenshots/Step_5.png)

Step 6:
Python might also be bundled with Fragpipe already, but if you don't see it, click download as well. 
![Step 6](./screenshots/Step_6.png)

Step 7:
Navigate to the next tab. You should be on the Workflow tab now. It should look similar to this: 
![Step 7](./screenshots/Step_7.png)

Step 8:
Make sure to select DIA_Umpire_SpecLib_Quant as your search engine. We won't go over all of the settings, but you can adjust other parameters as needed. The ones I am showing here are the most important ones for this workflow.
![Step 8](./screenshots/Step_8.png)

Step 9:
Now navigate to the Input tab. Here you can add your .raw files generated by the mass spec by clicking the Add files button.
![Step 9](./screenshots/Step_9.png)

Step 10:
After your files have been added, you should see them listed here like this. You should also be able to see how many total .raw files you have added.
![Step 10](./screenshots/Step_10.png)

Step 11:
Now select all of the files by selecting one of the files and then pressing Ctrl + A on your keyboard. All of the files should be highlighted now. Then click on Set DIA mode to specify that these are DIA files. This workflow only works with DIA data. 
![Step 11](./screenshots/Step_11.png)

Step 12:
After clicking Set DIA mode, you should see that all of your files are now labeled as DIA files like this:
![Step 12](./screenshots/Step_12.png)

Step 13:
This is the most important step. You need to name the experimental condition for each of your files. You also need to group files that have the same experimental condition together by assigning them to the same number, so files A & B that are both condition 1 should be assigned to group 1, files C & D that are both condition 2 should be assigned to group 2, and so on. This is essential for Fragpipe Analyzer to work properly later on.
![Step 13](./screenshots/Step_13.png)

Step 14:
After you have named all of your experimental conditions and assigned groups, your Input tab should look something like this: 

(Make sure to double check that everything is correct before proceeding to the next step.)
![Step 14](./screenshots/Step_14.png)

Step 15:
Now navigate to the Database tab. Here you need to add your FASTA file by clicking the Add (if you have a FASTA file ready to use) or Download (if you don't have one and you're only working with 1 species) button.
![Step 15](./screenshots/Step_15.png)

Step 16:
After adding your FASTA file, you should see it listed here like this:
You also need to add decoys by clicking Add decoys. This is essential for proper FDR calculation later on.
![Step 16](./screenshots/Step_16.png)

Step 17:
After everything is set up, navigate to the Run tab and select your output directory. Then click the Run button to start processing your data. Depending on how many files you have and your computer's specifications, this might take a while.
![Step 17](./screenshots/Step_17.png)

Step 18:
Before the run starts, a pop-up window might appear asking you to convert the .raw files to .mzML files. Click Yes to proceed. Fragpipe will take care of the conversion for you.
![Step 18](./screenshots/Step_18.png)

Step 19:
![Step 19](./screenshots/Step_19.png)
## How to use Fragpipe Analyzer to analyze your data